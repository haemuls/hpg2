{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/game/[id]/game_start.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"btnDelete\": \"game_start-module__Qcqx3q__btnDelete\",\n  \"btnPrimary\": \"game_start-module__Qcqx3q__btnPrimary\",\n  \"commentContent\": \"game_start-module__Qcqx3q__commentContent\",\n  \"commentDelete\": \"game_start-module__Qcqx3q__commentDelete\",\n  \"commentEdit\": \"game_start-module__Qcqx3q__commentEdit\",\n  \"commentItem\": \"game_start-module__Qcqx3q__commentItem\",\n  \"commentMeta\": \"game_start-module__Qcqx3q__commentMeta\",\n  \"commentSection\": \"game_start-module__Qcqx3q__commentSection\",\n  \"commentTitle\": \"game_start-module__Qcqx3q__commentTitle\",\n  \"container\": \"game_start-module__Qcqx3q__container\",\n  \"formGroup\": \"game_start-module__Qcqx3q__formGroup\",\n  \"metaInfo\": \"game_start-module__Qcqx3q__metaInfo\",\n  \"title\": \"game_start-module__Qcqx3q__title\",\n  \"titleRow\": \"game_start-module__Qcqx3q__titleRow\",\n  \"viewerContainer\": \"game_start-module__Qcqx3q__viewerContainer\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 29, "column": 0}, "map": {"version":3,"sources":["file:///Users/haemul/Desktop/docu/hpground/hpg/src/app/game/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, useRouter } from 'next/navigation';\nimport styles from './game_start.module.css';  // CSS Module 임포트\nimport { getAccessToken } from '../../../../token';\n\nconst API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL || \"https://ec2-3-34-134-27.ap-northeast-2.compute.amazonaws.com/api/wargame-problems\";\nconst FILE_BASE_URL = API_BASE_URL.replace('/api/wargame-problems', '') || \"https://ec2-3-34-134-27.ap-northeast-2.compute.amazonaws.com\";\n\ninterface Problem {\n  title: string;\n  creator: string;\n  level: number;\n  problemFile?: string;\n  detail: string;\n  dockerfileLink?: string;\n}\n\ninterface Ranking {\n  nickname: string;\n  firstBlood: string;\n}\n\ninterface Comment {\n  id: number;\n  creator: {\n    nickname: string;\n  };\n  createdAt: string;\n  content: string;\n}\n\ninterface ApiResponse<T> {\n  result: T;\n}\n\nconst CTFProblemPage = () => {\n  const params = useParams();\n  const router = useRouter();\n  const problemId = Array.isArray(params?.id) ? params.id[0] : params?.id || \"6\";\n\n  const [problem, setProblem] = useState<Problem | null>(null);\n  const [flag, setFlag] = useState<string>(\"\");\n  const [message, setMessage] = useState<string>(\"\");\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [newComment, setNewComment] = useState<string>(\"\");\n  const [ranking, setRanking] = useState<Ranking[]>([]);\n  const [vmAddress, setVmAddress] = useState<string>(\"\");\n  const [token, setToken] = useState<string | null>(null);\n  const [isTokenLoaded, setIsTokenLoaded] = useState(false);\n\n  useEffect(() => {\n    const storedToken = getAccessToken();\n    setToken(storedToken);\n    setIsTokenLoaded(true); // 토큰 로딩 완료\n  }, []);\n\n  useEffect(() => {\n    if (!isTokenLoaded) return;\n\n    if (!token) {\n      alert(\"로그인이 필요한 서비스입니다.\");\n      router.push(\"/login\"); // 로그인 페이지로 리다이렉트\n      return;\n    }\n\n    const fetchProblem = async () => {\n      try {\n        const res = await fetch(`https://ec2-3-34-134-27.ap-northeast-2.compute.amazonaws.com/api/problems/${problemId}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*',\n          },\n        });\n\n        if (!res.ok) {\n          throw new Error(`문제 API 호출 실패: ${res.status} ${res.statusText}`);\n        }\n\n        const data: ApiResponse<Problem> = await res.json();\n        setProblem(data.result);\n      } catch (error) {\n        console.error(\"문제 가져오기 실패:\", error);\n      }\n    };\n\n    const fetchComments = async () => {\n      try {\n        const res = await fetch(`${FILE_BASE_URL}/api/comments/problem/${problemId}`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*',\n          },\n        });\n\n        if (!res.ok) {\n          throw new Error(`댓글 API 호출 실패: ${res.status} ${res.statusText}`);\n        }\n\n        const data: ApiResponse<Comment[]> = await res.json();\n        setComments(data.result);\n      } catch (error) {\n        console.error(\"댓글 가져오기 실패:\", error);\n      }\n    };\n\n    const fetchRanking = async () => {\n      try {\n        const res = await fetch(`${FILE_BASE_URL}/api/problems/${problemId}/firstblood?size=5`, {\n          method: 'GET',\n          headers: {\n            'Authorization': `Bearer ${token}`,\n            'Accept': '*/*',\n          },\n        });\n\n        if (!res.ok) {\n          throw new Error(`랭킹 API 호출 실패: ${res.status} ${res.statusText}`);\n        }\n\n        const data: ApiResponse<Ranking[]> = await res.json();\n        if (Array.isArray(data.result)) {\n          setRanking(data.result);\n        } else {\n          setRanking([data.result]); // 객체를 배열로 감싸서 상태에 저장\n        }\n      } catch (error) {\n        console.error(\"랭킹 조회 실패:\", error);\n      }\n    };\n\n    fetchProblem();\n    fetchComments();\n    fetchRanking();\n  }, [problemId, token, isTokenLoaded]);\n\n  const handleSubmit = async () => {\n    if (!token) return;\n\n    try {\n      const url = `${FILE_BASE_URL}/api/problems/${problemId}/solve?flag=${encodeURIComponent(flag)}`;\n      const res = await fetch(url, {\n        method: \"GET\",\n        headers: {\n          \"Authorization\": `Bearer ${token}`,\n          \"Accept\": '*/*',\n        },\n      });\n\n      if (!res.ok) {\n        setMessage(\"정답 확인 중 오류가 발생했습니다.\");\n        return;\n      }\n\n      const data = await res.json();\n      setMessage(data.result ? \"정답입니다! 축하합니다.\" : \"오답입니다. 다시 시도하세요.\");\n    } catch (error) {\n      console.error(\"정답 확인 실패:\", error);\n      setMessage(\"정답 확인 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const handleAddComment = async () => {\n    if (newComment.trim() === \"\") return;\n\n    if (!token) {\n      alert(\"로그인이 필요합니다.\");\n      return;\n    }\n\n    try {\n      const res = await fetch(`${API_BASE_URL}/api/comments`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          type: \"PROBLEM\", // \"PROBLEM\"으로 설정\n          parentId: problemId, // 부모 댓글 ID는 문제 ID로 설정\n          contents: newComment, // 댓글 내용\n        }),\n      });\n\n      if (!res.ok) {\n        throw new Error(`댓글 작성 실패: ${res.status} ${res.statusText}`);\n      }\n\n      const data = await res.json();\n      setComments((prevComments) => [...prevComments, data.result]); // 새 댓글을 댓글 목록에 추가\n      setNewComment(\"\"); // 댓글 작성 후 입력값 초기화\n    } catch (error) {\n      console.error(\"댓글 작성 실패:\", error);\n      alert(\"댓글 작성 중 오류가 발생했습니다.\");\n    }\n  };\n\n  const handleShowVmAddress = () => {\n    setVmAddress(problem?.dockerfileLink || \"VM 주소가 제공되지 않았습니다.\");\n  };\n\n  if (!problem) return <div>로딩 중...</div>;\n\n  const formatTime = (timeString: string) => {\n    const date = new Date(timeString);\n    return `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\n  };\n\n  return (\n    <div className={styles.game_start}>\n      <h1>{problem.title}</h1>\n      <p>작성자: {problem.creator}</p>\n      <p>레벨: {problem.level}</p>\n      <div className={styles.problemDetails}>\n        <p>{problem.detail}</p>\n        {problem.dockerfileLink && (\n          <button onClick={handleShowVmAddress}>VM 주소 보기</button>\n        )}\n        {vmAddress && <p>VM 주소: {vmAddress}</p>}\n      </div>\n\n      <div>\n        <h3>정답 제출</h3>\n        <input\n          type=\"text\"\n          value={flag}\n          onChange={(e) => setFlag(e.target.value)}\n          placeholder=\"정답을 입력하세요\"\n        />\n        <button onClick={handleSubmit}>정답 제출</button>\n        <p>{message}</p>\n      </div>\n\n      <div>\n        <h3>댓글</h3>\n        {comments.length > 0 ? (\n          comments.map((comment) => (\n            <div className={styles.comment} key={comment.id}>\n              <strong className={styles.creator}>{comment.creator.nickname}</strong>\n              <p>{comment.content}</p>\n              <small>{formatTime(comment.createdAt)}</small>\n            </div>\n          ))\n        ) : (\n          <p>댓글이 없습니다.</p>\n        )}\n\n        <textarea\n          value={newComment}\n          onChange={(e) => setNewComment(e.target.value)}\n          placeholder=\"댓글을 입력하세요\"\n        />\n        <button onClick={handleAddComment}>댓글 추가</button>\n      </div>\n\n      <div>\n        <h3>랭킹</h3>\n        {ranking.length > 0 ? (\n          <ul>\n            {ranking.map((rank, index) => (\n              <li key={index}>\n                {rank.nickname} - 첫 번째 정답: {rank.firstBlood}\n              </li>\n            ))}\n          </ul>\n        ) : (\n          <p>랭킹 정보가 없습니다.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default CTFProblemPage;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/haemul/Desktop/docu/hpground/hpg/node_modules/next/navigation.js"],"sourcesContent":["module.exports = require('./dist/client/components/navigation')\n"],"names":[],"mappings":"AAAA,OAAO,OAAO","ignoreList":[0],"debugId":null}}]
}